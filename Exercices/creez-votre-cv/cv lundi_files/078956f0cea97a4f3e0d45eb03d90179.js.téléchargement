(self["webpackJsonp"] = self["webpackJsonp"] || []).push([["qMFH"],{"MqMFH":function(_,__,__webpack_require__){__webpack_require__.n_x = __webpack_require__.n;__webpack_require__("MEEO/");self._699df59375a48e33d111ea9894f1ebde = self._699df59375a48e33d111ea9894f1ebde || {};(function(__c) {'use strict';var b2=async function(a,b){if(!a.We(b)){var c=__c.n(b.ref),d=c.page,e=c.element,f=c.parent;"story"===a.config.viewMode&&(a.selection.Bg(d),await Promise.resolve());a2.K(()=>{a.Uh={store:b,focused:!0};e?f?a.selection.yX(d,f,e):a.selection.lj(d,e):a.selection.Bg(d);dod(a,b)})}},eod=async function(a,b,c){c=await __c.azb(a.controller,b.ref.target,c);a.zFb(b,c)},fod=function(a,b,c){return __c.aj(a.viewport.eq(c).transform(b)).top},c2=function(a){if(a.viewport.mounted&&!(!a.reference||a.Uh&&
a.Uh.focused||a.isDragging())){var b=a.reference,c=b.page,d=b.Qdb;if(!a.Z8(b.target))return b=a.viewport.F8(),{offset:fod(a,b,c)+d*a.config.zoom}}},jod=function(a){let b;const c=a2.J(()=>a.mode,f=>{window.clearTimeout(b);b=void 0;"overlay"===f?a.wna=!0:b=window.setTimeout(a2.l(()=>{a.wna=!1}),god)},{fireImmediately:!0}),d=a2.J(()=>a.DCa,f=>{const g=new Set(f.map(k=>k.ref.target));for(var h of a.controller.xf.values())h.ref&&!g.has(h.ref.target)&&(h.ref=void 0,a.Uh&&a.Uh.store===h&&(a.Uh=void 0));
for(const k of f){f=k.ref;h=k.xf;for(const p of h)!p.ref&&p instanceof d2&&(p.ref=f)}for(const k of a.oL.keys())g.has(k)||a.oL.delete(k)},{fireImmediately:!0}),e=a2.J(()=>{if(a.viewport.mounted&&!a.isDragging()&&!a.viewport.AI){var f=a.DCa;if(0!==f.length){var g=[],h=a.viewport.F8(),k=a.config.zoom,p;for(const r of f){var q=f=r.ref;const v=q.page;q=q.target;const x=r.xf,z=f.Qdb;p&&p.page===v||(p={page:f.page,offset:fod(a,h,v)});f=p.offset+z*k;for(const A of x)A.ref&&A.ref.target===q&&g.push({store:A,
offset:f,height:A.Fga})}h=c2(a);if(!a.C9&&h)h={type:"button",offset:h.offset};else{const r=a.Uh&&a.Uh.store;h={type:"comment",zy:r?g.findIndex(v=>r===v.store):0}}return{reference:h,sFc:g}}}},f=>{if(f){var g=f.reference,h=f.sFc;f=(r,v)=>{for(;0<=r;r--){const x=h[r],z=x.store;v-=x.height;if(z.offset<=v)break;v=z.offset=v}};var k=(r,v)=>{for(;r<h.length;r++){const x=h[r],z=x.store,A=x.height;z.offset=Math.max(x.offset,v);v=z.offset+A}};k(0,0);if("comment"===g.type){var p=h[g.zy],q=p.offset;const r=p.height;
p.store.offset=q;f(g.zy-1,q);k(g.zy+1,q+r)}else if("button"===g.type)p=g.offset,q=h.findIndex(r=>r.offset>=g.offset),0>q?f(h.length-1,p):(f(q-1,p),k(q,p+hod));else throw new __c.E(g);}},{fireImmediately:!0,scheduler:iod});return()=>{c();d();e()}},kod=function(a,b){return!!b.ref&&a.page===b.ref.page&&a.element===b.ref.element&&a.parent===b.ref.parent},e2=function(a,b){const c=a.controller.j6a(b).list;return(a=a.oL.get(b))?[...c,a]:c},mod=function(a,b){const c=new lod(__c.n(a.reference));c.offset=__c.n(c2(a)).offset;
var d=a.controller;d.analytics.trackCommentAddButtonClicked({documentId:d.documentId,source:b});a.oL.set(c.ref.target,c);b2(a,c)},dod=function(a,b){var c=__c.n(b.ref),d=a.config.zoom;const e=a.viewport;var f=e.F8(),g=__c.aj(e.sp().transform(f));const h=g.height,k=g.top,p=k+h;g=e.eq(c.page).transform(f);c=c.element?c.i6a.transform(__c.Ki(d).then(__c.cj(g))):g;var q=__c.aj(c);d=q.top;q=d+q.height;b=d+b.Fga;d>=k&&d<=p||q>=k&&q<=p&&b>=k&&b<=p||(g.height<=h?b=g.center().y-h/2:c.height<=h?(b=c.center().y-
h/2,g=__c.aj(g),b=Math.max(b,g.top),b=Math.min(b,g.top+g.height-h)):b=d,f=__c.Pi(f).then(e.pI()).transform(0,0).y+b,a.gWa.animate(()=>e.Ts.y,r=>e.W3(r),f))},nod=function(a,b){let c=b.ref;b=b.comment;b instanceof d2&&(b.ref=c,a.Uh&&a.Uh.focused&&(a.Uh={store:a.Uh.store,focused:!1}));b2(a,b)},ood=function(a){const b=a.Uh,c=a.xdc;if(0!==c.length){var d=b?c.findIndex(e=>{let f=e.ref;e=e.comment;return e===b.store&&kod(f,e)}):0;nod(a,c[b&&b.focused?(d+1)%c.length:d])}},pod=function(a){const b=a.Uh,c=a.xdc;
if(0!==c.length){var d=((b?c.findIndex(e=>{let f=e.ref;e=e.comment;return e===b.store&&kod(f,e)}):c.length)+c.length-1)%c.length;nod(a,c[d])}},rod=function(a,b,c,d){c=qod(a.Z8,c,a.Lf,d);let e;for(let g=c.length-1;0<=g;g--){var f=c[g];const h=new __c.FD(b,f,d),k=a.controller.j6a(f).list;for(const p of k)p.ref=h;0<k.length?e=k[0]:(f=a.oL.get(f))&&(e=f)}return e},qod=function(a,b,c,d){a=__c.kva(b,d,a);a.sort(__c.mva(c));return a.map(e=>e.element)},iod=function(a){requestAnimationFrame(()=>setTimeout(a,
0))};const f2=__webpack_require__("mrSG");const g2=__webpack_require__("TSYQ");const a2=__webpack_require__("2vnA");const h2=__webpack_require__("TyAF");const i2=__webpack_require__("q1tI");const sod=__webpack_require__("Gp1o");const tod=__webpack_require__("CMvH");let k2=class extends i2.Component{constructor(){super(...arguments);this.key=0;this.Rtb=[["tab",a=>a.stopPropagation()],[(0,__c.Sj)("tab"),a=>a.stopPropagation()]];this.rza=a=>{this.LVa();return this.props.onSubmit(a)};this.qza=a=>this.props.onSubmit(a).then(this.LVa);this.pc=()=>{this.LVa();this.props.pc&&this.props.pc()}}render(){const a=this.props,b=a.type;return i2.createElement(__c.gz,{map:this.Rtb,UN:!1,zi:!0},i2.createElement(j2,Object.assign({key:this.key},{type:b,comment:a.comment,Bm:a.Bm,
AXa:a.AXa,lk:a.lk,onChange:a.onChange},{onSubmit:"comment"===b?this.qza:this.rza,pc:this.pc})))}LVa(){this.key=1-this.key}};k2.defaultProps={AXa:!1,lk:!0};__c.l(()=>k2.prototype.key);Object(f2.a)([a2.E.ref],k2.prototype,"key",void 0);__c.l(()=>k2.prototype.LVa);Object(f2.a)([a2.l.bound],k2.prototype,"LVa",null);k2=Object(f2.a)([h2.b],k2);
let j2=class extends i2.Component{constructor(){super(...arguments);this.input=i2.createRef();this.Zq=new __c.DD;this.WL=!0;this.pending=this.focused=!1}componentDidMount(){const a=this.input.current;a&&this.rXa&&(a.focus(),this.props.comment&&__c.Nyb(a));h2.a(this,a2.J(()=>this.Zq.content,b=>this.props.onChange&&this.props.onChange(b),{fireImmediately:!0}))}render(){var a=this.props;const b=a.Bm,c=a.comment;a=a.type;const d=this.Zq.IYa;return i2.createElement("div",{className:g2("su4lTQ",{["lV-ClA"]:!!c,
["_6CAXFA"]:!!c&&"comment"===a})},i2.createElement(__c.LJ,{ref:this.input,placeholder:this.placeholder,EQ:this.rXa?2:1,onFocus:this.onFocus,onBlur:this.onBlur,onSubmit:"comment"===a?this.qza:this.rza,pc:this.pc,disabled:this.pending,comment:c,v:b,store:this.Zq}),d&&i2.createElement("div",{className:"XZAFsw TfRV3Q",style:{top:`${d.top+d.height}px`}},i2.createElement(__c.BK,{store:this.Zq,HW:this.HW})),this.Gna&&i2.createElement("div",{className:"DrjA5g"},i2.createElement(__c.yB,{checked:this.WL,disabled:this.pending,
onChange:this.Eka,label:__c.D("AXif6w",[])})),this.B8a&&i2.createElement("p",{className:"gLAuXQ n9zSJA ZTpOuQ"},__c.D("PvmUtA",[])),this.rXa&&i2.createElement("div",{className:"IJUq_Q"},i2.createElement(__c.dB,{disabled:this.pending,onClick:this.pc,className:"_800gMQ _7fXyHQ"},__c.D("kFxubQ",[])),i2.createElement(__c.rs,{disabled:this.mYa,onClick:"comment"===a?this.qza:this.rza,className:"_7fXyHQ",icon:this.pending?__c.Xn:void 0},this.action)))}get placeholder(){const a=this.props,b=a.type;if(!a.comment)return"comment"===
b?__c.D("sCcq7A",[]):__c.D("VE1dcw",[])}get action(){const a=this.props,b=a.type;return a.comment?__c.D("GhalUg",[]):"comment"===b?__c.D("688VSA",[]):__c.D("Vro+UA",[])}HW(a){this.input.current&&this.input.current.BYb(a)}get Gna(){const a=__c.Ej(this.props.Bm,this.Zq);return!!a&&0<a.length}Eka(a,b){this.WL=b}get rXa(){return"comment"===this.props.type||this.focused||!this.Zq.fxa||!!this.props.comment}get B8a(){return 1024<this.Zq.content.length}get mYa(){const a=this.Zq.fxa;return!this.props.lk||
a||this.pending||this.B8a}onFocus(){this.focused=!0}onBlur(){this.focused=!1;this.Zq.fxa&&!this.props.comment&&this.props.pc&&this.props.pc()}qza(){var a=this.props,b=a.Bm;a=a.onSubmit;var c=this.Zq;const d=c.content;c=c.Wg;this.mYa||(this.pending=!0,b=this.WL&&__c.Ej(b,this.Zq),a({content:d,Wg:c,U8:b||[]}).catch(a2.l(()=>this.pending=!1)))}rza(){var a=this.props,b=a.Bm;a=a.onSubmit;var c=this.Zq;const d=c.content;c=c.Wg;this.mYa||(b=this.WL&&__c.Ej(b,this.Zq),a({content:d,Wg:c,U8:b||[]}))}pc(){this.props.pc&&
this.props.pc()}};__c.l(()=>j2.prototype.WL);Object(f2.a)([a2.E.ref],j2.prototype,"WL",void 0);__c.l(()=>j2.prototype.focused);Object(f2.a)([a2.E.ref],j2.prototype,"focused",void 0);__c.l(()=>j2.prototype.pending);Object(f2.a)([a2.E.ref],j2.prototype,"pending",void 0);__c.l(()=>j2.prototype.placeholder);Object(f2.a)([a2.o],j2.prototype,"placeholder",null);__c.l(()=>j2.prototype.action);Object(f2.a)([a2.o],j2.prototype,"action",null);__c.l(()=>j2.prototype.HW);
Object(f2.a)([a2.l.bound],j2.prototype,"HW",null);__c.l(()=>j2.prototype.Gna);Object(f2.a)([a2.o],j2.prototype,"Gna",null);__c.l(()=>j2.prototype.Eka);Object(f2.a)([a2.l.bound],j2.prototype,"Eka",null);__c.l(()=>j2.prototype.rXa);Object(f2.a)([a2.o],j2.prototype,"rXa",null);__c.l(()=>j2.prototype.B8a);Object(f2.a)([a2.o],j2.prototype,"B8a",null);__c.l(()=>j2.prototype.mYa);Object(f2.a)([a2.o],j2.prototype,"mYa",null);__c.l(()=>j2.prototype.onFocus);
Object(f2.a)([a2.l.bound],j2.prototype,"onFocus",null);__c.l(()=>j2.prototype.onBlur);Object(f2.a)([a2.l.bound],j2.prototype,"onBlur",null);__c.l(()=>j2.prototype.qza);Object(f2.a)([a2.l.bound],j2.prototype,"qza",null);__c.l(()=>j2.prototype.rza);Object(f2.a)([a2.l.bound],j2.prototype,"rza",null);__c.l(()=>j2.prototype.pc);Object(f2.a)([a2.l.bound],j2.prototype,"pc",null);j2=Object(f2.a)([h2.b],j2);let m2=class extends i2.Component{constructor(){super(...arguments);this.z2=a=>{const b=this.props;return b.v.vba(b.store,a)};this.si=a=>this.props.v.si(a);this.Zz=a=>this.props.v.Zz(a);this.NNb=()=>{const a=this.props;return b2(a.v,a.store)};this.f2=a=>{const b=this.props;return b.v.b6a(b.store,a)};this.MOb=a=>{const b=this.props;return b.v.Rfa(b.store,a)};this.i2=(a,b)=>{const c=this.props;return c.v.c6a(c.store,a,b)};this.ENb=()=>{const a=this.props;a.v.scb(a.store)};this.d2=()=>{const a=this.props;
return a.v.RH(a.store)};this.e2=a=>{const b=this.props;return b.v.i_(b.store,a)};this.aR=()=>{const a=this.props;return a.v.fBa(a.store)}}get eQ(){const a=this.props,b=a.store,c=a.v;return a.focused||c.Ffa.has(b)}render(){var a=this.props;const b=a.store.Ob,c=a.focused,d=a.Bm,e=a.lk;a=a.Gz;return i2.createElement("div",{id:`comment-${b.comment.id}`,className:g2("T4-mlQ _1qZURQ",{["rkIdVQ MjbkXw TfRV3Q"]:this.eQ})},i2.createElement(l2,{Ob:b.comment,replies:b.replies,Rs:b.Rs,focused:c,si:this.si,Zz:this.Zz,
lk:e,MOb:this.MOb,NNb:this.NNb,f2:this.f2,i2:this.i2,ENb:this.ENb,d2:this.d2,e2:this.e2,aR:this.aR,z2:this.z2,Bm:d,Gz:a}))}};__c.l(()=>m2.prototype.eQ);Object(f2.a)([a2.o],m2.prototype,"eQ",null);m2=Object(f2.a)([h2.b],m2);
let n2=class extends i2.Component{constructor(){super(...arguments);this.ZWc=a=>{const b=this.props;return eod(b.v,b.store,a)};this.pc=()=>{const a=this.props;a.v.vub(a.store)}}get eQ(){const a=this.props,b=a.store,c=a.v;return a.focused||c.Ffa.has(b)}render(){var a=this.props;const b=a.Bm;a=a.lk;return i2.createElement("div",{className:g2("T4-mlQ _1qZURQ",{["rkIdVQ MjbkXw TfRV3Q"]:this.eQ})},i2.createElement(k2,{type:"comment",Bm:b,AXa:!0,onSubmit:this.ZWc,pc:this.pc,lk:a}))}};__c.l(()=>n2.prototype.eQ);
Object(f2.a)([a2.o],n2.prototype,"eQ",null);n2=Object(f2.a)([h2.b],n2);
let l2=class extends i2.Component{constructor(){super(...arguments);this.pbb=!0;this.XI=(a,b)=>{const c=this.props,d=c.f2,e=c.i2;return a===c.Ob?d(b):e(a,b)};this.gn=a=>{const b=this.props,c=b.d2,d=b.e2;return a===b.Ob?c():d(a)}}render(){const a=this.props,b=a.replies,c=a.lk,d=a.MOb,e=a.ENb,f=a.Bm,g=a.Rs-b.length,h={onFocus:a.NNb,XI:this.XI,gn:this.gn,kza:a.aR,ji:a.z2,Bm:f,si:a.si,Zz:a.Zz,lk:c,Gz:a.Gz};return i2.createElement(i2.Fragment,null,i2.createElement(o2,Object.assign({},h,{comment:a.Ob,type:"comment"})),
0<g&&i2.createElement("button",{className:"b7vggQ hzBFtQ n9zSJA ZTpOuQ",onClick:e},__c.D("ZKrOZQ",[g])),b.map(k=>i2.createElement(o2,Object.assign({},h,{key:k.id,comment:k,type:"reply"}))),this.TZb&&i2.createElement(k2,{type:"reply",onSubmit:d,onChange:this.LOb,Bm:f,AXa:!0,lk:c}))}get TZb(){return this.props.focused||!this.pbb}LOb(a){this.pbb=!a}};__c.l(()=>l2.prototype.pbb);Object(f2.a)([a2.E.ref],l2.prototype,"pbb",void 0);__c.l(()=>l2.prototype.TZb);Object(f2.a)([a2.o],l2.prototype,"TZb",null);
__c.l(()=>l2.prototype.LOb);Object(f2.a)([a2.l.bound],l2.prototype,"LOb",null);l2=Object(f2.a)([h2.b],l2);
let o2=class extends i2.Component{constructor(){super(...arguments);this.Kt=!1;this.VVa=()=>{const a=this.props,b=a.ji;b(a.comment)};this.aR=()=>{const a=this.props,b=a.kza;return b(a.comment)};this.dXc=a=>{const b=this.props,c=b.XI;return c(b.comment,a).then(a2.l(()=>{this.Kt=!1}))};this.pFb=()=>{this.Kt=!0;this.props.onFocus()}}render(){var a=this.props;const b=a.lk,c=a.comment,d=a.Bm,e=a.type;a=a.Gz;return this.Kt?i2.createElement("div",{className:"Y07zSQ"},i2.createElement(k2,{type:e,onSubmit:this.dXc,
pc:this.sNb,Bm:d,AXa:!0,lk:b,comment:c})):i2.createElement(a,{kza:"comment"===e?this.aR:void 0,type:e,pending:"pending"===c.Tfb,error:"reply"===e&&"error"===c.Tfb?i2.createElement(uod,{VVa:this.VVa}):void 0,key:c.id,comment:c,G1:this.G1})}sNb(){this.Kt=!1}get G1(){var a=this.props;const b=a.comment,c=a.si,d=a.Zz,e=a.gn;a="reply"===a.type;const f=[];c(b)&&f.push({Icon:__c.FA,label:a?__c.D("r/GefQ",[]):__c.D("L1Ai+w",[]),onMouseUp:()=>this.pFb()});d(b)&&f.push({Icon:__c.Pk,label:a?__c.D("17eDJA",[]):
__c.D("Cj3aIw",[]),onMouseUp:()=>e(b)});return f}};__c.l(()=>o2.prototype.Kt);Object(f2.a)([a2.E.ref],o2.prototype,"Kt",void 0);__c.l(()=>o2.prototype.sNb);Object(f2.a)([a2.l.bound],o2.prototype,"sNb",null);__c.l(()=>o2.prototype.pFb);Object(f2.a)([a2.l],o2.prototype,"pFb",void 0);__c.l(()=>o2.prototype.G1);Object(f2.a)([a2.o],o2.prototype,"G1",null);o2=Object(f2.a)([h2.b],o2);
const uod=a=>{a=a.VVa;return i2.createElement(i2.Fragment,null,i2.createElement("span",null,__c.D("13+qHQ",[])," "),i2.createElement(__c.eC,{onClick:a},__c.D("Frp0dA",[])))};const god=parseInt("200ms",10),hod=parseInt("32px",10)+__c.Xp,vod=parseInt("256px",10)+parseInt("48px",10)+__c.Xp;var p2=class{constructor(){this.Fga=1}};__c.l(()=>p2.prototype.Fga);Object(f2.a)([a2.E.ref],p2.prototype,"Fga",void 0);__c.l(()=>p2.prototype.offset);Object(f2.a)([a2.E.ref],p2.prototype,"offset",void 0);var d2=class extends p2{constructor(a){super();this.Ob=a}};__c.l(()=>d2.prototype.ref);Object(f2.a)([a2.E.ref],d2.prototype,"ref",void 0);const wod=new __c.ix("draft_comment_");
var lod=class extends p2{constructor(a){super();this.ref=a;this.id=wod.next()}};
var q2=class{constructor(a,b,c,d,e,f,g,h){this.controller=a;this.document=b;this.config=c;this.isDragging=d;this.selection=e;this.viewport=f;this.hk=g;this.Lf=h;this.oL=new Map;this.Ffa=new a2.c;this.gWa=new __c.oj;this.k8b=a2.q("commentingAvailableMargin");this.wna=this.YZa=!1;this.TDa=Object(sod.g)(k=>new __c.GD(k,this.ewb,this.Lf,this.Z8));this.ewb=Object(sod.g)(k=>new __c.HD(k,this.Z8));this.Z8=k=>this.oL.has(k)}get Pra(){const a=this.Lf;var b=this.viewport;this.k8b.reportObserved();if(!b.mounted)return 0;
const c=b.sp();b=b.Eha();return Math.min(vod,Math.max(0,a?b.Hc.x-c.Hc.x:c.r.x-b.r.x))}get C9(){return isNaN(this.Pra)||this.Pra>=vod}get mode(){if(this.C9)return"pinned";if(this.gIb)return"overlay";const a=0<this.Sp.length;return!this.YZa&&a?"overlay":"pinned"}get xdc(){return this.DCa.flatMap(a=>{const b=a.ref;return a.xf.map(c=>({ref:b,comment:c}))})}get DCa(){const a=[];this.document.pages.forEach(b=>{var c=e2(this,b);0<c.length&&a.push({ref:new __c.FD(b),xf:c});for(const d of this.TDa(b).Tna){c=
d.element;const e=d.parent,f=e2(this,c);0<f.length&&a.push({ref:new __c.FD(b,c,e),xf:f})}});return a}get Sp(){return"story"===this.config.viewMode?this.Kxb:this.T9a}get Dzb(){return"story"===this.config.viewMode?this.Lxb:this.V9a}get T9a(){const a=[];for(const b of this.controller.xf.values())b.ref&&a.push(b);return a}get Kxb(){return this.T9a.filter(a=>{var b;return(null===(b=a.ref)||void 0===b?void 0:b.page)===this.viewport.Ma})}get V9a(){return[...this.oL.values()]}get Lxb(){return this.V9a.filter(a=>
{var b;return(null===(b=a.ref)||void 0===b?void 0:b.page)===this.viewport.Ma})}vub(a){this.oL.delete(a.ref.target);this.Uh&&this.Uh.store===a&&(a=a.ref.target.tb,this.Uh=0<a.length?(a=this.controller.Xva(a[a.length-1]))&&{store:a,focused:!1}:void 0)}zFb(a,b){this.oL.delete(a.ref.target);b.offset=a.offset;b.Fga=a.Fga;b2(this,b)}b6a(a,b){return this.controller.b6a(a,b)}Ihb(a){if(this.Uh&&this.Uh.store===a){const c=__c.n(a.ref);var b=c.target.tb;const d=b.findIndex(e=>e===a.Ob.comment.id);this.Uh=(b=
b.slice(0,d).reverse().concat(b.slice(d+1)).map(e=>this.controller.Xva(e)).find(e=>e&&e.ref?e.ref.element===c.element:!1))&&{store:b,focused:!1}}}RH(a){this.Ihb(a);return this.controller.RH(a)}fBa(a){this.Ihb(a);return this.controller.fBa(a,b=>{__c.Pj(this.hk,{ng:__c.D("LRA3hg",[]),xu:{type:"custom",nO:__c.D("rnE3Tg",[]),MQ:b}})})}scb(a){return this.controller.scb(a)}vba(a,b){return this.controller.vba(a,b)}Rfa(a,b){return this.controller.Rfa(a,b)}c6a(a,b,c){return this.controller.c6a(a,b,c)}i_(a,
b){return this.controller.i_(a,b)}si(a){return this.controller.si(a)}Zz(a){return this.controller.Zz(a)}nNa(){this.k8b.reportChanged()}get targetPage(){var a,b=this.Uh?this.Uh.store:this.DCa[0];return(b=null===(a=null===b||void 0===b?void 0:b.ref)||void 0===a?void 0:a.page)&&this.document.pages.has(b)?b:void 0}get gIb(){return!!this.Uh&&this.Uh.focused}We(a){return!!this.Uh&&this.Uh.store===a&&this.Uh.focused}PHa(a){this.We(a)&&(this.Uh={store:a,focused:!1})}SSa(a){this.reference=void 0;this.Ffa.clear();
if(a){var b=a.page,c=a.elements;a=a.parent;this.YZa||(this.YZa=this.Sp.some(e=>e.ref&&e.ref.page===b));if(c){this.Ffa.replace(c.flatMap(e=>e2(this,e)));var d=rod(this,b,c,a);1===c.length&&(this.reference=new __c.FD(b,c[0],a));!d||this.Uh&&this.Uh.store.ref&&this.Uh.store.ref.element&&c.includes(this.Uh.store.ref.element)||(this.Uh={store:d,focused:!1})}else{this.reference=new __c.FD(b);c=this.controller.j6a(b).list;for(d of c)d.ref=this.reference;if(c[0]||this.oL.get(b))this.Uh&&this.Uh.store.ref&&
this.Uh.store.ref.target===b||(this.Uh={store:c[0],focused:!1});this.Ffa.replace([...e2(this,b)])}}}};__c.l(()=>q2.prototype.Uh);Object(f2.a)([a2.E.ref],q2.prototype,"Uh",void 0);__c.l(()=>q2.prototype.reference);Object(f2.a)([a2.E.ref],q2.prototype,"reference",void 0);__c.l(()=>q2.prototype.oL);Object(f2.a)([a2.E.shallow],q2.prototype,"oL",void 0);__c.l(()=>q2.prototype.Ffa);Object(f2.a)([a2.E.ref],q2.prototype,"Ffa",void 0);__c.l(()=>q2.prototype.YZa);
Object(f2.a)([a2.E.ref],q2.prototype,"YZa",void 0);__c.l(()=>q2.prototype.wna);Object(f2.a)([a2.E.ref],q2.prototype,"wna",void 0);__c.l(()=>q2.prototype.Pra);Object(f2.a)([a2.o],q2.prototype,"Pra",null);__c.l(()=>q2.prototype.C9);Object(f2.a)([a2.o],q2.prototype,"C9",null);__c.l(()=>q2.prototype.mode);Object(f2.a)([a2.o],q2.prototype,"mode",null);__c.l(()=>q2.prototype.DCa);Object(f2.a)([a2.o.struct],q2.prototype,"DCa",null);__c.l(()=>q2.prototype.Sp);
Object(f2.a)([a2.o.struct],q2.prototype,"Sp",null);__c.l(()=>q2.prototype.Dzb);Object(f2.a)([a2.o.struct],q2.prototype,"Dzb",null);__c.l(()=>q2.prototype.T9a);Object(f2.a)([a2.o.struct],q2.prototype,"T9a",null);__c.l(()=>q2.prototype.Kxb);Object(f2.a)([a2.o.struct],q2.prototype,"Kxb",null);__c.l(()=>q2.prototype.V9a);Object(f2.a)([a2.o.struct],q2.prototype,"V9a",null);__c.l(()=>q2.prototype.Lxb);Object(f2.a)([a2.o.struct],q2.prototype,"Lxb",null);__c.l(()=>q2.prototype.vub);
Object(f2.a)([a2.l],q2.prototype,"vub",null);__c.l(()=>q2.prototype.zFb);Object(f2.a)([a2.l],q2.prototype,"zFb",null);__c.l(()=>q2.prototype.Ihb);Object(f2.a)([a2.l],q2.prototype,"Ihb",null);__c.l(()=>q2.prototype.RH);Object(f2.a)([a2.l],q2.prototype,"RH",null);__c.l(()=>q2.prototype.fBa);Object(f2.a)([a2.l],q2.prototype,"fBa",null);__c.l(()=>q2.prototype.targetPage);Object(f2.a)([a2.o],q2.prototype,"targetPage",null);__c.l(()=>q2.prototype.gIb);Object(f2.a)([a2.o],q2.prototype,"gIb",null);const xod=parseInt("256px",10);
let t2=class extends i2.Component{constructor(){super(...arguments);this.nNa=()=>{this.props.v.nNa()};this.Fvc=h2.b(a=>i2.createElement(m2,Object.assign({},a,{Gz:this.props.Gz})))}componentDidMount(){const a=this.props,b=a.v,c=a.selection;Object(h2.a)(this,jod(b));Object(h2.a)(this,a2.J(()=>{var d;a:{if(d=c.state)switch(d.type){case "audio":break;case "pages":d={page:d.page};break a;case "elements":d=d.inner&&"group"===d.inner.type?{page:d.page,elements:d.inner.Ja,parent:d.inner.group}:{page:d.page,
elements:d.elements};break a;default:throw new __c.E(d);}d=void 0}return d},d=>b.SSa(d),{fireImmediately:!0}))}get awb(){var a=this.props.v;const b=a.mode,c=a.Pra;a=a.Lf;if("pinned"===b||0>=c)return 0;if("overlay"===b)return(a?-1:1)*(c-xod-4*__c.Xp);throw new __c.E(b);}render(){var a=this.props;const b=a.v,c=a.Bm,d=a.cr;a=b.mode;const e=b.Pra,f=b.C9,g=b.Lf;return i2.createElement(i2.Fragment,null,i2.createElement(r2,{v:b}),i2.createElement("div",{className:g2("Pv4OGQ",{["OwQFiA"]:"overlay"===a}),
style:{width:`${e}px`,transform:`translateX(${this.awb}px)`}},b.Sp.map(h=>i2.createElement(s2,{key:h.Ob.comment.id,E5b:this.Fvc,store:h,v:b,Lf:g,Bm:c,focused:b.We(h),lk:1===d.status,C9:f,onMouseDown:this.nNa})),b.Dzb.map(h=>i2.createElement(s2,{key:h.id,E5b:n2,store:h,v:b,Lf:g,Bm:c,focused:b.We(h),lk:1===d.status,C9:f,onMouseDown:this.nNa}))))}};__c.l(()=>t2.prototype.awb);Object(f2.a)([a2.o],t2.prototype,"awb",null);t2=Object(f2.a)([h2.b],t2);
let r2=class extends i2.Component{componentDidMount(){Object(h2.a)(this,a2.J(()=>c2(this.props.v),a=>this.offset=a&&a.offset,{equals:a2.n.structural,scheduler:a=>requestAnimationFrame(()=>setTimeout(a,0))}))}render(){return i2.createElement(__c.QH,null,null!=this.offset&&i2.createElement(__c.wu,{label:__c.D("CRsrKA",[])},i2.createElement("button",{className:"YB5GNA M7lnPA TfRV3Q",onClick:this.fka,style:{transform:`translateY(${this.offset}px)`}},i2.createElement(__c.Tj,{size:"medium"}))))}fka(){const a=
this.props.v;a.nNa();mod(a,"comment_button")}};__c.l(()=>r2.prototype.offset);Object(f2.a)([a2.E.ref],r2.prototype,"offset",void 0);__c.l(()=>r2.prototype.fka);Object(f2.a)([a2.l.bound],r2.prototype,"fka",null);r2=Object(f2.a)([h2.b],r2);
let s2=class extends i2.Component{constructor(){super(...arguments);this.element=i2.createRef();this.s2=()=>{var a=this.props;const b=a.v;a=a.store;{const c=document.getSelection&&document.getSelection();c&&"Range"===c.type&&this.element.current&&c.containsNode(this.element.current,!0)&&c.removeAllRanges()}b.We(a)&&document.addEventListener("mouseup",this.PHa,{once:!0})}}render(){var a=this.props;const b=a.E5b;var c=a.C9,d=a.Lf;const e=a.store,f=a.focused;a=g2("FEzUUA M7lnPA",{["WhkAsg"]:f,["koBA3Q"]:c});
c=(c?-5:-4)*__c.Xp;d=null!=e.offset?`translate(${f?(d?-1:1)*c:0}px, ${e.offset}px)`:`matrix3d(0${", 0".repeat(15)})`;return i2.createElement(__c.QE,{baa:this.s2},i2.createElement("div",{ref:this.element,style:{transform:d},className:a,onMouseDown:this.onMouseDown},i2.createElement(tod.a,{client:!0,onResize:this.hOb},g=>i2.createElement("div",{ref:g.measureRef,className:"kXFmvw"},i2.createElement(b,Object.assign({},this.props))))))}hOb(a){this.props.store.Fga=a.client.height+__c.Xp}onMouseDown(){const a=
this.props,b=a.onMouseDown;b2(a.v,a.store);b()}PHa(){const a=this.props;a.v.PHa(a.store)}};__c.l(()=>s2.prototype.hOb);Object(f2.a)([a2.l.bound],s2.prototype,"hOb",null);__c.l(()=>s2.prototype.onMouseDown);Object(f2.a)([a2.l.bound],s2.prototype,"onMouseDown",null);__c.l(()=>s2.prototype.PHa);Object(f2.a)([a2.l.bound],s2.prototype,"PHa",null);s2=Object(f2.a)([h2.b],s2);__c.Xva={hMc:function(a){let b=a.ca,c=a.config,d=a.Lf,e=a.document,f=a.isDragging,g=a.Bm,h=a.Eb,k=a.cr,p=a.selection,q=a.viewport,r=a.Gz;const v=new __c.QJ(a.analytics,a.documentId,a.P5a,e,a.Tp,a.hpa,a.accessToken,a.Y6,a.undo,z=>new d2(z),z=>__c.Pj(h,{ng:z})),x=new q2(v,e,c,f,p,q,h,d);return new __c.Oj({controller:v,ca:b,Component:()=>i2.createElement(t2,{config:c,v:x,Bm:g,cr:k,selection:p,Gz:r}),Wva:()=>{},kRa:z=>{c2(x)&&mod(x,z)},c4:z=>{(z=v.Xva(z))&&z.ref&&b2(x,z)},Wkb:()=>ood(x),$kb:()=>pod(x),
IGa:()=>x.wna})}};
}).call(self, self._699df59375a48e33d111ea9894f1ebde);}},[["MqMFH","fDYT","K2W9","EEO/","rZBJ","QA57"]]]);
//# sourceMappingURL=078956f0cea97a4f3e0d45eb03d90179.js.map